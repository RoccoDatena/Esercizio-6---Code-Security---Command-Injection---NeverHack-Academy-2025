import java.io.BufferedReader;
import java.io.InputStreamReader;

public class InsecureCommandExecutor {
	public static void executeCommand(String userInput) {
		String allowedCharacters = "[a-zA-Z0-9.]+"; // lista di caratteri
		if (userInput.matches(allowedCharacters)) {
			try {

				String command = "ping -c 4 " + userInput;

				Process process = Runtime.getRuntime().exec(command);
				BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));

				String line;
				while ((line = reader.readLine()) != null) {
					System.out.println(line);
				}
			} catch (Exception e) {
				e.printStackTrace();
			}
	} else {
		System.out.println("Invalid entry");
	}
	}
	public static void main(String[] args) {
		if (args.length > 0) {
			executeCommand(args[0]);
		} else {
			System.out.println("Usage: java InsecureCommandExecutor <IP>");
		}
	}
}
